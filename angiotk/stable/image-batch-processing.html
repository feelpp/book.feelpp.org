<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The master script :: Feel++ Docs</title>
    <link rel="canonical" href="https://docs.feelpp.org/angiotk/stable/image-batch-processing.html">
    <link rel="prev" href="../../toolboxes/stable/fsi/index.html">
    <link rel="next" href="centerlines/index.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<script>!function(l,p){if(l.protocol!==p&&l.host=="docs.antora.org"){l.protocol=p}else if(/\.gitlab\.io$/.test(l.host)){l.replace(p+"//docs.antora.org"+l.pathname.substr(l.pathname.indexOf("/",1))+l.search+l.hash)}}(location,"https:")</script>

<script src="../../_/js/vendor/tabs-block-extension.js"></script>
<script src="../../_/js/vendor/tabs-block-behavior.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEscapes: true,
    processEnvironments: true,
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },

  TeX: {
      Macros: {
      RR: "{\\mathbb R}",
      NN: "{\\mathbb N}",
      Nso: "{N_{\\mathrm{so}}}",
      Nma: "{N_{\\mathrm{ma}}}",
      Nno: "{N_{\\mathrm{no}}}",
      Ne: "{N_{\\mathrm{e}}}",
      Ilag: ["{\\mathcal{I}^{\\mathrm{lag}}_{#1}}",1],
      calTh: "{\\mathcal{T}_h}",
      Ck: ["{\\mathcal{C}^{#1}}",1],
      Pk: ["{\\mathcal{P}^{#1}}",1],
      Qk: ["{\\mathcal{Q}^{#1}}",1],
      Pch: ["{P^{#1}_{c,h}}",1],
      Pcho: ["{P^{#1}_{c,h,0}}",1],
      Qch: ["{Q^{#1}_{c,h}}",1],
      Ich: ["{\\mathcal{I}^{#1}_{c,h}#2}",2],
      poly: ["{\\mathbb{#1}}",1],
      nf: "{n_f}",
      ngeo: "{n_{\\mathrm{geo}}}",
      geo: "{\\mathrm{geo}}",
      card: ["{\\operatorname{card}(#1)}",1],
      dim: ["{\\operatorname{dim}(#1)}",1],
      opdim: "{\\operatorname{dim}}",
      card: ["{\\operatorname{card}(#1)}",1],
      poly: ["{\\mathbb{#1}",1],
      R: ["{\\mathbb{R}^{#1}}",1],
      set: ["{\\left\\{#1\\right\\}}",1],
      diam: "{\\operatorname{diam}}",
      jump: ["{[\\![ #1 ]\\!]}",1],
      Next: "{\\mathrm{n}}",
      essinf: "{\\operatorname{ess}\\, \\operatorname{inf}}",
      tr: "{\\operatorname{tr}}",
      Id: "{\\mathcal{I}}",
      disp: ["{\\mathbf{#1}}",1],
      stresst: ["{\\mathbf{\\sigma(#1)}}",1],
      deformt: ["{\\mathbf{\\varepsilon(#1)}}",1],
      domain: "{\\Omega}",
      prect: ["{\\left\\(#1\\right\\)}",1],
      ds: "",
      bold: ["{\\bf #1}",1],
      p: "{\\mathrm{p}}",
      q:"{\\mathbf{q}}",
      n:"{\\mathbf{n}}",
      T:"{\\mathcal{T}}",
      F:"{\\mathcal{F}}",
      P:"{\\mathcal{P}}",
      v:"{\\mathbf{v}}"
  },
  extensions: ["mhchem.js"] }
});
</script>
<!--<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML"></script>-->
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML'>
</script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>-->

<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js" integrity="sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq" crossorigin="anonymous"></script>-->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-65761593-1"></script>
<script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-65761593-1')</script>
<script>var uiRootPath = '../../_'</script>

<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5f34e90f94876f0012457ea1&product=sop' async='async'></script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar  navbar-expand-sm bg-dark navbar-dark">
    <div class="navbar-brand">
      <div class="navbar-item feelpp-logo">
        <a href="https://docs.feelpp.org"><img src="../../_/img/feelpp-logo.svg" alt="Feel++ logo"/></a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <form class="search">
            <i class="fa-solid fa-search"></i>
            <input type="text" placeholder="Search Feel++ Docs" class="query" id="search-query">
          </form>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Manuals</div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://docs.feelpp.org/user/">User</a>
            <a class="navbar-item" href="https://docs.feelpp.org/dev/">Developer</a>
            <a class="navbar-item" href="https://docs.feelpp.org/toolbox/">Toolbox</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link" data-title="Support">
            <span class="icon"><img src="../../_/img/octicons-24.svg#view-comment-discussion"></span>
          </div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item has-icon" href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ" target="_blank" rel="noopener">
              <span class="icon"><img src="../../_/img/slack-icon.svg"></span>
              <span>Chat</span>
            </a>
            <a class="navbar-item has-icon" href="https://github.com/orgs/feelpp/discussions" target="_blank" rel="noopener">
              <span class="icon"><img src="../../_/img/octicons-16.svg#view-discussion-closed"></span>
              <span>Discussions</span>
            </a>
            <a class="navbar-item has-icon" href="https://github.com/feelpp" target="_blank" rel="noopener">
              <span class="icon"><img src="../../_/img/octicons-16.svg#view-mark-github"></span>
              <span>Source</span>
            </a>
            <a class="navbar-item has-icon" href="https://twitter.com/feelpp" target="_blank" rel="noopener">
              <span class="icon"><img src="../../_/img/octicons-16.svg#view-hash"></span>
              <span>Tweets</span>
            </a>
            <a class="navbar-item has-icon" href="https://github.com/feelpp/book.feelpp.org/issues/new">
              <span class="icon"><img src="../../_/img/octicons-16.svg#view-bug"></span>
              <span>Issues</span>
            </a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable download-item">
          <div class="navbar-item"><div class="download-btn">Get Feel++</div></div>
          <div class="navbar-dropdown is-right">
              <a class="navbar-item" href="../../user/stable/install/index.html" target="_blank" rel="noopener">
                <span>Stable (0.110)</span>
              </a>
              <a class="navbar-item" href="../../user/latest/install/index.html" target="_blank" rel="noopener">
                <span>Latest</span>
              </a>
          </div>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="https://www.cemosis.fr">
            <img class="cemosis-logo"  src="../../_/img/cemosis-logo.svg" alt="Cemosis logo"/>
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<a href="#" class="menu-expand-toggle"></a>
<div class="nav-container" data-component="angiotk" data-version="0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">AngioTK User Manual</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="how-angiotk-works.html">How AngioTK works</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="get-angiotk.html">Get AngioTK</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="get-angiotk.html#_using_docker">Using Docker</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-angiotk.html">Build AngioTK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="run-angiotk.html">Run AngioTK</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="run-angiotk.html#_input_files">Input files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="run-angiotk.html#_command_line">Command line</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="run-angiotk.html#_examples">Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="module-filtering.html">Image Filtering Module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="module-filtering.html#_rorpo">Using RORPO</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="module-meshing.html">Meshing Module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-2-surface-from-image.html">Surface from Image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-3-centerlines-gui-tool.html">Centerline GUI Tool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-4-centerlines-computing.html">Centerlines computing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-5-centerlines-merging.html">Centerlines merging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-6-image-generation.html">Image generation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-7-surface-remeshing.html">Surface remeshing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meshing/module-8-volume-meshing.html">Volume meshing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="module-flow.html">Fluid Flow Module (Feel++)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../toolboxes/stable/cfd/index.html">Computational Fluid Dynamics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../toolboxes/stable/fsi/index.html">Fluid Structure Interaction</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="image-batch-processing.html">Image batch processing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="centerlines/index.html">Mesh Generation From Centerlines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="centerlines/spring.html">Spring</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mri/index.html">Mesh Generation From MRI</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AngioTK User Manual</span>
    <span class="version">0.1</span>
  </div>
  <ul class="components">
      <li class="component">
        <a class="title" href="../../user/stable/index.html">Feel++ User Manual</a>
          <ul class="versions">
              <li class="version">
                <a href="../../user/latest/index.html">latest</a>
              </li>
              <li class="version is-latest">
                <a href="../../user/stable/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../user/0.109/index.html">0.109</a>
              </li>
              <li class="version">
                <a href="../../user/0.108/index.html">0.108</a>
              </li>
              <li class="version">
                <a href="../../user/0.107/index.html">0.107</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../dev/stable/index.html">Developer manual</a>
          <ul class="versions">
              <li class="version">
                <a href="../../dev/latest/index.html">latest</a>
              </li>
              <li class="version is-latest">
                <a href="../../dev/stable/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../dev/0.109/index.html">0.109</a>
              </li>
              <li class="version">
                <a href="../../dev/0.108/index.html">0.108</a>
              </li>
              <li class="version">
                <a href="../../dev/0.107/index.html">0.107</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../data/stable/index.html">Data Manual</a>
          <ul class="versions">
              <li class="version">
                <a href="../../data/latest/index.html">latest</a>
              </li>
              <li class="version is-latest">
                <a href="../../data/stable/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../data/0.109/index.html">0.109</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../math/index.html">Feel++ Mathematics</a>
          <ul class="versions">
              <li class="version is-latest">
                <a href="../../math/index.html">master</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../toolboxes/stable/index.html">Feel++ Toolboxes Manual</a>
          <ul class="versions">
              <li class="version">
                <a href="../../toolboxes/latest/index.html">latest</a>
              </li>
              <li class="version is-latest">
                <a href="../../toolboxes/stable/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../toolboxes/0.109/index.html">0.109</a>
              </li>
              <li class="version">
                <a href="../../toolboxes/0.108/index.html">0.108</a>
              </li>
              <li class="version">
                <a href="../../toolboxes/0.107/index.html">0.107</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../cases/stable/index.html">Feel++ Toolbox Cases Guide</a>
          <ul class="versions">
              <li class="version is-latest">
                <a href="../../cases/stable/index.html">latest</a>
              </li>
              <li class="version">
                <a href="../../cases/0.110/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../cases/0.109/index.html">0.109</a>
              </li>
              <li class="version">
                <a href="../../cases/0.108/index.html">0.108</a>
              </li>
              <li class="version">
                <a href="../../cases/0.107/index.html">0.107</a>
              </li>
          </ul>
      </li>
      <li class="component is-current">
        <a class="title" href="index.html">AngioTK User Manual</a>
          <ul class="versions">
              <li class="version is-current is-latest">
                <a href="index.html">0.1</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../salome/stable/index.html">Feel++ and Salome</a>
          <ul class="versions">
              <li class="version is-latest">
                <a href="../../salome/stable/index.html">current</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../feelpp/stable/index.html">Feel++ Documentation</a>
          <ul class="versions">
              <li class="version is-latest">
                <a href="../../feelpp/stable/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../feelpp/0.109/index.html">0.109</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../feelpp-tutorial-dev/index.html">Feel++ Programming Tutorial</a>
      </li>
      <li class="component">
        <a class="title" href="../../feelpp-project/index.html">Feel++ Template Project</a>
      </li>
      <li class="component">
        <a class="title" href="../../mor/stable/index.html">Model Order Reduction</a>
          <ul class="versions">
              <li class="version">
                <a href="../../mor/latest/index.html">latest</a>
              </li>
              <li class="version is-latest">
                <a href="../../mor/stable/index.html">0.110</a>
              </li>
              <li class="version">
                <a href="../../mor/0.109/index.html">0.109</a>
              </li>
          </ul>
      </li>
      <li class="component">
        <a class="title" href="../../contribute/index.html">Toolbox Contribution Guide</a>
          <ul class="versions">
              <li class="version is-latest">
                <a href="../../contribute/index.html">master</a>
              </li>
          </ul>
      </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
    <a href="../../home/index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">AngioTK User Manual</a></li>
    <li><a href="image-batch-processing.html">Image batch processing</a></li>
  </ul>
</nav>

  
    <div class="edit-this-page"><a href="https://github.com/feelpp/angiotk/edit/master/docs/modules/ROOT/pages/image-batch-processing.adoc">Edit this Page</a></div>
  
  <div class="page-downloads">
  <span class="label">Download as</span>
  <ul class="download-options">
    <li>
      <a onclick="print(this)" href="#" data-toggle="tooltip" data-placement="left" title="Print to PDF"
         class="pdf-download">
        <img class="pdf-file-icon icon" src="../../_/img/pdf.svg"/> .pdf
      </a>
    </li>
  </ul>
</div>
</div>

  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">The master script</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The features discussed in this page are currently only available in the feature/matrix branch.</p>
</div>
<div class="paragraph">
<p>The master script&#8217;s purpose is to provide a easy way to process multiple MRI files, collect the results and present them in a convenient way.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features"><a class="anchor" href="#_features"></a>1. Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_parallel_execution"><a class="anchor" href="#_parallel_execution"></a>1.1. Parallel execution</h3>
<div class="paragraph">
<p>It is possible to process multiple MRI images in parallel using AngioTK.
This is especially useful when processing a lot of MRI files with multicore processors.</p>
</div>
<div class="paragraph">
<p>The files will be processed in parallel and asynchronously.</p>
</div>
</div>
<div class="sect2">
<h3 id="_results_matrix_and_history"><a class="anchor" href="#_results_matrix_and_history"></a>1.2. Results matrix and history</h3>
<div class="paragraph">
<p>We store results and metadata of all runs.
They can be analysed easily and comfortably using a web browser.</p>
</div>
<div class="paragraph">
<p>Details and a screenshot of each major pipeline step are available for each MRI file processed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements"><a class="anchor" href="#_requirements"></a>2. Requirements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_input_files_common_location"><a class="anchor" href="#_input_files_common_location"></a>2.1. Input files common location</h3>
<div class="paragraph">
<p>All the MRI files must share a common path, which means they should all be located in one directory tree.</p>
</div>
<div class="paragraph">
<p>This directory tree will be recursively walked through and all the files having the <code>.mha</code> extension will be processed.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Because the whole directory tree will be walked through, having a directory tree containing only the target files is advised to speed up this step.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_web_server_execution"><a class="anchor" href="#_web_server_execution"></a>2.2. Web server execution</h3>
<div class="paragraph">
<p>The master script provides an easy and comfortable way to access and analyse AngioTK results through a web browser.
Thus, a web server with access to the results is necessary.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_master_script"><a class="anchor" href="#_running_the_master_script"></a>3. Running the master script</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arguments"><a class="anchor" href="#_arguments"></a>3.1. Arguments</h3>
<div class="paragraph">
<p>The master script is a python script taking at least these two arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>--inputpath</em> : (string) the common path to all input files.</p>
</li>
<li>
<p><em>--outputpath</em> : (string) the path to write results.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following arguments are optional:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-n</em> : (default:-1) limit the maximum number of files to process. Usefull for quick tests. Negative values disable this limit.</p>
</li>
<li>
<p><em>-p</em> : (default:1) the number of worker processes (i.e. the maximum number of files to process simultaneously).</p>
</li>
<li>
<p><em>--noscreenshots</em> : a switch to disable screenshots rendering.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example"><a class="anchor" href="#_example"></a>3.2. Example</h3>
<div class="paragraph">
<p>Let&#8217;s assume we have a directory <code>/data/MRI</code> containing MRI files <code>MRI001.mha</code>, <code>MRI002.mha</code></p>
</div>
<div class="paragraph">
<p>We choose a directory to store results: <code>/data/angiotk_results</code></p>
</div>
<div class="paragraph">
<p>All we need now is to launch the master script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">python  $INSTALL/master.py \
	--inputpath /data/MRI \
	--outputpath /data/angiotk_results</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>INSTALL</code> is the path where AngioTK was installed (which means `master.py ` should be there).</p>
</div>
<div class="paragraph">
<p>After the script&#8217;s execution, <code>/data/angiotk_results</code> will contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>two directories <code>MRI001_mha</code> and <code>MRI002_mha</code>, each corresponding to an AngioTK pipeline normal output (when using the normal script <code>runAngioTKPipeline.py</code>, this is what <code>--outputpath</code> refers to)</p>
</li>
<li>
<p>an additionnal directory called <code>resultsDataBase</code>. This directory will contain all the metadata about angiotk run(s), including the screenshots.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_centerlines_edition"><a class="anchor" href="#_centerlines_edition"></a>3.3. Centerlines edition</h3>
<div class="paragraph">
<p>Because the centerline creation still relies on a manual step, the pipeline can not be executed entirely without human intervention.</p>
</div>
<div class="paragraph">
<p>For any set of MRI, We suggest running it once to create adequate directories, then creating centerline files and running the pipeline again:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the first run, the pipeline creates a directory in <code>$INSTALL/share/AngioTK/Examples/MeshFromMRI/</code> for each MRI (named after its file path).
This directory can now be filled with configuration files (see <a href="Runnning.adoc">Running AngioTK</a>) and already includes a <code>data</code> sudirectory to contain centerline files.</p>
</li>
<li>
<p>But, these directories being empty, the pipeline will use generic centerline files and try to perform reconstruction.
The pipeline may or may not fail thereafter, but all the subsequent output should be considered invalid anyway.</p>
</li>
<li>
<p>You can now use the <a href="The_Centerlines_Editing_Graphical_Tool.adoc">centerline graphical tool</a> to create centerline files for each MRI model.
Don&#8217;t forget to place them in the corresponding <code>$INSTALL/share/AngioTK/Examples/MeshFromMRI/&lt;MRI_directory&gt;/data</code> subdirectory.</p>
</li>
<li>
<p>The pipeline can now be launched again.
This time, the supplied centerline files (and possibly any other custom configuration file) will be used instead of the generic ones.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_accessing_the_results"><a class="anchor" href="#_accessing_the_results"></a>4. Accessing the results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>&lt;outputpath&gt;/resultsDataBase</code> directory contains an web page named <code>summary.html</code> and its related files, as well as a <code>runs/</code> directory.</p>
</div>
<div class="paragraph">
<p>The resultsDataBase directory should be used as the root of a web (HTTP) server to access the web page and all its content.</p>
</div>
<div class="sect2">
<h3 id="_a_summarized_view_of_all_runs"><a class="anchor" href="#_a_summarized_view_of_all_runs"></a>4.1. A summarized view of all runs</h3>
<div class="paragraph">
<p>The <code>summary.html</code> page presents a list of angiotk runs.
It is supposed to be served by a web server and accessed by a web browser.</p>
</div>
<div class="paragraph">
<p>Each run is listed with a few metadata, and a link to its own full page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_detailed_matrix_for_each_run"><a class="anchor" href="#_a_detailed_matrix_for_each_run"></a>4.2. A detailed matrix for each run</h3>
<div class="paragraph">
<p>Each time the master script is executed, a new directory is created inside de <code>runs</code> directory, named using the date and time of execution.
It contains a web page and its related files.</p>
</div>
<div class="paragraph">
<p>The web page first presents the run&#8217;s configuration (software versions, target database) and some statistics (successful and incomplete reconstructions, failures).</p>
</div>
<div class="paragraph">
<p>The web page also includes a matrix which gives details about each major pipeline step, for each MRI file.
This allows to check whether or not the pipeline failed, and where it stopped for a particular MRI file.
In case of failure, the cell is colored in red.
We also included short comments, execution time, and a screenshot of the output.</p>
</div>
</div>
<div class="sect2">
<h3 id="_storage_policy"><a class="anchor" href="#_storage_policy"></a>4.3. Storage policy</h3>
<div class="paragraph">
<p>In terms of storage, MRI and 3D models are huge compared to metadata and screenshots.
This is why we keep metadata and screenshots for each and every run, but overwrite all of the pipeline output.</p>
</div>
<div class="paragraph">
<p>If you need to keep the files, you can either manually copy them elsewhere, or change the whole output path of future pipeline runs.</p>
</div>
<div class="paragraph">
<p>This behaviour could also easily be modified in the code.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
To reduce computing time, RORPO is only run when no previously filtered image exists.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../../toolboxes/stable/fsi/index.html">Fluid Structure Interaction</a></span>
  <span class="next"><a href="centerlines/index.html">Mesh Generation From Centerlines</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="sharethis-inline-share-buttons"></div>
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.cemosis.fr" class="icon">
            <img src="../../_/img/logoCemosisTransparent.png" alt="Cemosis">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.cemosis.fr" target="_blank" rel="noopener">Projects Documentation</a></li>
          <li><a href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ" target="_blank" rel="noopener">Forums(Slack)</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.cemosis.fr" target="_blank" rel="noopener">Cemosis</a></li>
          <li><a href="https://www.cemosis.fr/news" target="_blank" rel="noopener">News</a></li>
          <li><a href="https://www.cemosis.fr/projects" target="_blank" rel="noopener">Projects</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.feelpp.org" target="_blank" rel="noopener">Feel++ Documentation</a></li>
          <li><a href="http://docs.feelpp.org/user/">Get Started</a></li>
          <li><a href="http://docs.feelpp.org/user//install/distributions/">Downloads</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/cemosis.fr" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/cemosis" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/cemosis" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2023 Cemosis, Université de Strasbourg</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.cemosis.fr/terms-of-use">Terms of Use</a>
        <a href="https://www.cemosis.fr/privacy-policy">Privacy Policy</a>
        <a href="https://www.cemosis.fr/cookie-policy">Cookie Policy</a>
        <a href="https://www.cemosis.fr/support-policy">Support Policy</a>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>


<script async src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../_/js/vendor/fontawesome.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>

<script async id="search-script" src="../../_/js/vendor/docsearch.js" data-app-id="03CF2L5SFL" data-api-key="53f606259c1ee7b82a42956e0c776c3d" data-index-name="feelpp" data-stylesheet="../../_/css/vendor/docsearch.css">
</script>

<script type="text/javascript">
function toggleFullScreen() {
   var doc = window.document;
   var docEl = doc.documentElement;

   var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
   var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

   if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
       requestFullScreen.call(docEl);
   }
   else {
       cancelFullScreen.call(doc);
   }
}
</script>
  </body>
</html>
