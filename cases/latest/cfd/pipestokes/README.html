<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Stokes flow in a pipe :: Feel++ Docs</title>
    <link rel="canonical" href="https://docs.feelpp.org/cases/latest/cfd/pipestokes/README.html">
    <link rel="prev" href="../TurekHron/README.html">
    <link rel="next" href="../oscillating_cylinder/README.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">    
<script>!function(l,p){if(l.protocol!==p&&l.host=="docs.antora.org"){l.protocol=p}else if(/\.gitlab\.io$/.test(l.host)){l.replace(p+"//docs.antora.org"+l.pathname.substr(l.pathname.indexOf("/",1))+l.search+l.hash)}}(location,"https:")</script>

<script src="../../../../_/js/vendor/tabs-block-extension.js"></script>
<script src="../../../../_/js/vendor/tabs-block-behavior.js"></script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEscapes: true,
    processEnvironments: true, 
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },

  TeX: {
      Macros: {
      RR: "{\\mathbb R}",
      NN: "{\\mathbb N}",
      Nso: "{N_{\\mathrm{so}}}",
      Nma: "{N_{\\mathrm{ma}}}",
      Nno: "{N_{\\mathrm{no}}}",
      Ne: "{N_{\\mathrm{e}}}",
      Ilag: ["{\\mathcal{I}^{\\mathrm{lag}}_{#1}}",1],
      calTh: "{\\mathcal{T}_h}",
      Ck: ["{\\mathcal{C}^{#1}}",1],
      Pk: ["{\\mathcal{P}^{#1}}",1],
      Qk: ["{\\mathcal{Q}^{#1}}",1],
      Pch: ["{P^{#1}_{c,h}}",1],
      Pcho: ["{P^{#1}_{c,h,0}}",1],
      Qch: ["{Q^{#1}_{c,h}}",1],
      Ich: ["{\\mathcal{I}^{#1}_{c,h}#2}",2],
      poly: ["{\\mathbb{#1}}",1],
      nf: "{n_f}",
      ngeo: "{n_{\\mathrm{geo}}}",
      geo: "{\\mathrm{geo}}",
      card: ["{\\operatorname{card}(#1)}",1],
      dim: ["{\\operatorname{dim}(#1)}",1],
      opdim: "{\\operatorname{dim}}",
      card: ["{\\operatorname{card}(#1)}",1],
      poly: ["{\\mathbb{#1}",1],
      R: ["{\\mathbb{R}^{#1}}",1],
      set: ["{\\left\\{#1\\right\\}}",1],
      diam: "{\\operatorname{diam}}",
      jump: ["{[\\![ #1 ]\\!]}",1],
      Next: "{\\mathrm{n}}",
      essinf: "{\\operatorname{ess}\\, \\operatorname{inf}}",
      tr: "{\\operatorname{tr}}",
      Id: "{\\mathcal{I}}",
      disp: ["{\\mathbf{#1}}",1],
      stresst: ["{\\mathbf{\\sigma(#1)}}",1],
      deformt: ["{\\mathbf{\\varepsilon(#1)}}",1],
      domain: "{\\Omega}",
      prect: ["{\\left\\(#1\\right\\)}",1],
      ds: "",
      bold: ["{\\bf #1}",1],
      p: "{\\mathrm{p}}",
      q:"{\\mathbf{q}}",
      n:"{\\mathbf{n}}",
      T:"{\\mathcal{T}}",
      F:"{\\mathcal{F}}",
      P:"{\\mathcal{P}}",
      v:"{\\mathbf{v}}"
  },
  extensions: ["mhchem.js"] }
});
</script>
<!--<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML"></script>-->
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script> -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML'>
</script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>-->

<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js" integrity="sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq" crossorigin="anonymous"></script>-->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-65761593-1"></script>
<script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-65761593-1')</script>

<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=5f34e90f94876f0012457ea1&product=sop' async='async'></script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar  navbar-expand-sm bg-dark navbar-dark">
    <div class="navbar-brand">
      <div class="navbar-item">
         <!--  <a href="https://book.feelpp.org">Feel++ documentation</a> -->
           <a href="https://docs.feelpp.org">Feel++ Docs</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://docs.feelpp.org">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Docs</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>Latest Version</strong></div>

            <!-- this code allow to manage ordering of navbar item -->
                                                                                                                        

            <hr class="navbar-divider">
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Feel++</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>GitHub</strong></div>
            <a class="navbar-item" href="http://github.com/feelpp/feelpp">GitHub Repository</a>
            <a class="navbar-item" href="http://github.com/feelpp/feelpp/issues">GitHub Issue Tracker</a>
            <hr class="navbar-divider">
            <div class="navbar-item"><strong>Documentation</strong></div>
            <a class="navbar-item" href="http://docs.feelpp.org/user/">User Manual</a>
            <a class="navbar-item" href="http://docs.feelpp.org/dev/">Developer Manual</a>
            <a class="navbar-item" href="http://docs.feelpp.org/toolbox/">Toolbox Manual</a>
            
          </div>
        </div>
        <div class="primary-action">
            <form class="navbar-item search">
              <input type="text" placeholder="Search Feel++ Docs" class="query" id="search-query">
              <button type="button" class="search-btn"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand" href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ">
            <img src="../../../../_/img/slack.png" alt="slack" style="width:30px;"></a>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="http://docs.feelpp.org">
            <img src="../../../../_/img/logoFeelpp.png" alt="Feel++" style="width:60px;">
          </a>
        </div>
        <div class="navbar-item">
          <a class="navbar-brand"  href="http://www.cemosis.fr">
            <img src="../../../../_/img/logoCemosisTransparent.png" alt="Cemosis" style="width:60px;">
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cases" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Feel++ Toolbox Cases Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cfpdes/index.html">Coefficient Form PDEs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cfpdes/heat/index.html#_heat">Heat</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cfpdes/heat/index.html#_benchmarks">Benchmarks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../cfpdes/heat/ISO_10211_2007/index.html">ISO_10211_2007</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../cfpdes/heat/index.html#_cases">Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cfpdes/solid/index.html#_heat">Computational Solid Mechanics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cfpdes/fluid/index.html#_heat">Computational Fluid Mechanics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../csm/README.html">Computational Solid Mechanics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../csm/README.html#_benchmarks">Benchmarks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/TurekHron/README.html">Turek-Hron</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/solenoid/README.html">Solenoid</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/NAFEMS-le1/README.html">NAFEMS-le1</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/NAFEMS-le10/README.html">NAFEMS-le10</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/cantilever/README.html">Cantilever linear solver benchmark</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../csm/README.html#_cases">Cases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/cantilever/README.html">Cantilever</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/torsion-bar/README.html">Torsion Bar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/rotating-winch/index.html">Rotating Winch</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/ribs/index.html">Bracing with ribs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/suspension/index.html">Suspension mechanics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/sensor/index.html">Sensor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/sheet-rounding/index.html">Effect of sheet rounding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/t-beam/index.html">T-Beam</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/vierendeel-truss/index.html">Vierendeel Truss</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/pendulum2D/index.html">Pendulum 2D</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../csm/spring/README.html">Spring CSM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../README.html">Computational Fluid Mechanics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../README.html#_benchmarks">Benchmarks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../TurekHron/README.html">Turek-Hron</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="README.html">Stokes in a pipe</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../oscillating_cylinder/README.html">Oscillating Cylinder</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../stokes_boundary_layer/README.html">Stokes Boundary Layer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../laminar_isothermal_backward_facing_step/README.html">Laminar, Isothermal Backward Facing Step</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../README.html#_cases">Cases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../backwardstep/README.html">Backward Step</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring/README.html">Spring CFD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cyclone/README.html">Cyclone</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../heat/README.html">Heat Transfer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../heat/README.html#_benchmarks">Benchmarks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../heat/ISO_10211_2007/README.html">ISO 10211:2007</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../heat/README.html#_cases">Cases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../heat/motor/README.html">Heat Transfer in a Car Motor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../heat/2Dbuilding/README.html">2D Building</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../heat/3Dbuilding/README.html">3D Building</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../heat/opus/README.html">Cooling of electronic components</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../heatfluid/README.html">Heat &amp; Fluid</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Benchmarks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/channel_flow_with_viscous_heating/README.html">Channel Flow with Viscous Heating</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/boundary_layer_development/README.html">Boundary Layer Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/2Dbuilding_NS/README.html">2D Building with natural convection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/cabin/README.html">Aerothermal in an Airplane Cabin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/TurekHron/README.html">Forced heat convection around a cylinder</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/naturalconvection/README.html">Natural heat convection in a cavity</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../heatfluid/pipestokesmass/README.html">Mass transport with a Stokes flow in a pipe</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../fsi/README.html">Fluid Structure Interaction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../fsi/README.html#_benchmarks">Benchmarks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../fsi/TurekHron/README.html">Turek-Hron</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../fsi/wavepressure2d/README.html">Wave Pressure 2d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../fsi/wavepressure3d/README.html">Wave Pressure 3d</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../fsi/lid-driven-cavity/README.html">Lid Driven Cavity</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../fsi/README.html#_cases">Cases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../fsi/box/README.html">Box</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../fsi/structure/README.html">Structure</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../electric/README.html">Electric</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../electric/rect/readme.html">BusBar</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../electric/quarterturn/readme.html">Quarter Turn</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../thermoelectric/README.html">Thermo-Electric</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../thermoelectric/quarterturn/readme.html">Quarter Turn</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../thermoelectric/electromagnet/README.html">ElectroMagnet</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../maxwell/README.html">Maxwell</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../maxwell/README.html#_cases">Cases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../maxwell/Inductor/readme.html">Inductor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../maxwell/Harmonic/readme.html">Harmonic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../maxwell/Torus/readme.html">Torus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../maxwell/Tws/readme.html">Tws</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../multifluid/index.html">Multifluid Flow</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../multifluid/drop2d/README.html">Drop 2d</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../multifluid/drop3d/README.html">Drop 3d</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../hdg/README.html">Generic HDG Poisson equation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../hdg/usquare/README.html">Chessboard analytical solution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../hdg/red/README.html">nMOS transistor</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../hdg/2Dchannel/README.html">Flow in a channel</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Feel++ Toolbox Cases Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../angiotk/0.1/index.html">AngioTK User Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../angiotk/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../data/latest/index.html">Data Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../data/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../../data/0.109/index.html">0.109</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../dev/latest/index.html">Developer manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../dev/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../../dev/0.109/index.html">0.109</a>
        </li>
        <li class="version">
          <a href="../../../../dev/0.108/index.html">0.108</a>
        </li>
        <li class="version">
          <a href="../../../../dev/0.107/index.html">0.107</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../salome/current/index.html">Feel++ and Salome</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../salome/current/index.html">current</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../feelpp/latest/index.html">Feel++ Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../feelpp/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../../feelpp/0.109/index.html">0.109</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../math/index.html">Feel++ Mathematics</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../math/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../template_project/1.0.3/index.html">Feel++ Templace Project</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../template_project/1.0.3/index.html">1.0.3</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Feel++ Toolbox Cases Guide</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../0.109/index.html">0.109</a>
        </li>
        <li class="version">
          <a href="../../../0.108/index.html">0.108</a>
        </li>
        <li class="version">
          <a href="../../../0.107/index.html">0.107</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../toolboxes/latest/index.html">Feel++ Toolboxes Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../toolboxes/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../../toolboxes/0.109/index.html">0.109</a>
        </li>
        <li class="version">
          <a href="../../../../toolboxes/0.108/index.html">0.108</a>
        </li>
        <li class="version">
          <a href="../../../../toolboxes/0.107/index.html">0.107</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../tutorial-dev/latest/index.html">Feel++ Tutorial Dev</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tutorial-dev/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../user/latest/index.html">Feel++ User Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../user/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../../user/0.109/index.html">0.109</a>
        </li>
        <li class="version">
          <a href="../../../../user/0.108/index.html">0.108</a>
        </li>
        <li class="version">
          <a href="../../../../user/0.107/index.html">0.107</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../mor/latest/index.html">Model Order Reduction</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../mor/latest/index.html">latest</a>
        </li>
        <li class="version">
          <a href="../../../../mor/0.109/index.html">0.109</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../contribute/index.html">Toolbox Contribution Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../contribute/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../feelpp/0.109/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Feel++ Toolbox Cases Guide</a></li>
    <li><a href="../README.html">Computational Fluid Mechanics</a></li>
    <li><a href="../README.html#_benchmarks">Benchmarks</a></li>
    <li><a href="README.html">Stokes in a pipe</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">latest</button>
  <div class="version-menu">
    <a class="version is-current" href="README.html">latest</a>
    <a class="version" href="../../../0.109/cfd/pipestokes/README.html">0.109</a>
    <a class="version" href="../../../0.108/cfd/pipestokes/README.html">0.108</a>
    <a class="version" href="../../../0.107/cfd/pipestokes/README.html">0.107</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/feelpp/toolbox/edit/master/examples/modules/cfd/pages/pipestokes/README.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>

<article class="doc">
<h1 class="page">Stokes flow in a pipe</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_running_the_model">1. Running the model</a></li>
<li><a href="#_data_files">2. Data files</a>
<ul class="sectlevel2">
<li><a href="#_json_file">2.1. Json file</a></li>
<li><a href="#_cfg_file">2.2. CFG file</a></li>
</ul>
</li>
<li><a href="#_geometry_input_parameters">3. Geometry &amp; Input parameters</a>
<ul class="sectlevel2">
<li><a href="#_model_toolbox">3.1. Model &amp; Toolbox</a></li>
<li><a href="#_initial_conditions">3.2. Initial conditions</a></li>
<li><a href="#_boundary_conditions_2">3.3. Boundary conditions</a></li>
</ul>
</li>
<li><a href="#_benchmark">4. Benchmark</a>
<ul class="sectlevel2">
<li><a href="#_results">4.1. Results</a></li>
<li><a href="#_issues">4.2. Issues</a></li>
<li><a href="#_comparison">4.3. Comparison</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_running_the_model"><a class="anchor" href="#_running_the_model"></a>1. Running the model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The command line to run this pipestokes case</p>
</div>
<div id="command-line-first" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">mpirun -np 4 feelpp_toolbox_fluid --case "github:{repo:toolbox,path:examples/modules/cfd/examples/pipestokes/case_original}"</code></pre>
</div>
</div>
<button class="btn" data-clipboard-target="#command-line">
Copy command line to clipboard
</button>
<button class="btn" data-clipboard-text="github:{repo:toolbox,path:examples/modules/cfd/examples/pipestokes}">
Copy case option to clipboard
</button>
<div class="paragraph">
<p>Some useful commande lines:</p>
</div>
<div class="paragraph">
<p>-To edit the mesh step we must add</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--gmsh.hsize=</pre>
</div>
</div>
<div class="paragraph">
<p>-To edit other parameter in the geo file ( height for exemple) we must add</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--fluid.gmsh.geo-variables-list="height="</pre>
</div>
</div>
<div class="paragraph">
<p>-To edit json parameters we must add</p>
</div>
<div class="listingblock">
<div class="content">
<pre> --json-editions Parameters.height:n</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_files"><a class="anchor" href="#_data_files"></a>2. Data files</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_json_file"><a class="anchor" href="#_json_file"></a>2.1. Json file</h3>
<div class="sect3">
<h4 id="_names_and_type_of_model"><a class="anchor" href="#_names_and_type_of_model"></a>2.1.1. Names and Type of Model</h4>
<div class="paragraph">
<p>A model JSON file starts by giving names (long and short) as well as the type of model which will be used by the toolbox.
The latter allows to configure the set of equations associated the toolbox physics.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"Name": "Stokes flow in a pipe", <i class="conum" data-value="1"></i><b>(1)</b>
"ShortName":"pipestokes", <i class="conum" data-value="2"></i><b>(2)</b>
"Models": <i class="conum" data-value="3"></i><b>(3)</b>
{
   "equations":"Stokes" <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Name of the example, usually printed on-screen and in log files during simulations</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Short name of the example, it is used to create directories to store the results of the simulation of the model</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Section <code>Models</code> defined by the toolbox to define the main configuration of a toolbox and in particular the set of equations to be solved</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>toolbox specific option to define set of equations to be solved, read the toolbox manual to learn about the possible options.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_parameters"><a class="anchor" href="#_parameters"></a>2.1.2. Parameters</h4>
<div class="paragraph">
<p>This section of the Model JSON file defines the parameters that may enter expressions used in the subsequent sections.</p>
</div>
<div class="listingblock">
<div class="title">Example of a <code>Parameters</code> section</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"Parameters": <i class="conum" data-value="1"></i><b>(1)</b>
    {
        "ubar":"1.0", <i class="conum" data-value="2"></i><b>(2)</b>
        "height":"1.0", <i class="conum" data-value="3"></i><b>(3)</b>
        "vmax":"1.0",<i class="conum" data-value="4"></i><b>(4)</b>
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>name of the section</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>defines a new parameter <code>ubar</code> and its associated value</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>define the height of the geometry</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>define the maximal velocity</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_materials"><a class="anchor" href="#_materials"></a>2.1.3. Materials</h4>
<div class="paragraph">
<p>This section of the Model JSON file defines material properties linking the Physical Entities in the mesh data structures to these properties.</p>
</div>
<div class="listingblock">
<div class="title">Example of Materials section</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"Materials":
    {
        "Fluid": <i class="conum" data-value="1"></i><b>(1)</b>
        {
            "rho":"1.0", <i class="conum" data-value="2"></i><b>(2)</b>
            "mu":"1.0" <i class="conum" data-value="3"></i><b>(3)</b>
        }
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>gives the name of the physical entity (here <code>Physical Surface</code>) associated to the Material.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>density \(\rho\) is called <code>rho</code> and is given in SI units, in the stocks model there is no rho, but in the implementation of stoks equations it isused so we have to choose rho=1 in this case.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>viscosity \(\mu\) is called <code>mu</code> and is given in SI units</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_boundary_conditions"><a class="anchor" href="#_boundary_conditions"></a>2.1.4. Boundary Conditions</h4>
<div class="paragraph">
<p>This section of the Model JSON file defines the boundary conditions.</p>
</div>
<div class="listingblock">
<div class="title">Example of a <code>BoundaryConditions</code> section</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"BoundaryConditions":
    {
        "velocity":  <i class="conum" data-value="1"></i><b>(1)</b>
        {
            "Dirichlet": <i class="conum" data-value="2"></i><b>(2)</b>
            {
                "inlet": <i class="conum" data-value="3"></i><b>(3)</b>
                {
                    "expr":"{(vmax/(height-(height/2.))*(height/2.))*y*(height-y),0}:y:height:vmax" <i class="conum" data-value="4"></i><b>(4)</b>
                },
                "wall1": <i class="conum" data-value="5"></i><b>(5)</b>
                {
                    "expr":"{0,0}" <i class="conum" data-value="6"></i><b>(6)</b>
                },
                "wall2": <i class="conum" data-value="7"></i><b>(7)</b>
                {
                    "expr":"{0,0}" <i class="conum" data-value="8"></i><b>(8)</b>
                }
            }
        },
        "fluid": <i class="conum" data-value="9"></i><b>(9)</b>
        {
            "outlet": <i class="conum" data-value="10"></i><b>(10)</b>
            {
                "outlet": <i class="conum" data-value="11"></i><b>(11)</b>
                {
                    "expr":"0" <i class="conum" data-value="12"></i><b>(12)</b>
                }
            }
        }
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the field name of the toolbox to which the boundary condition is associated</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the type of boundary condition to apply, here <code>Dirichlet</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the physical entity (associated to the mesh) to which the condition is applied</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the mathematical expression associated to the condition</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>another physical entity to which <code>Dirichlet</code> conditions are applied</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>the associated expression to the entity</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>another physical entity to which <code>Dirichlet</code> conditions are applied</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>the associated expression to the entity</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>the variable toolbox to which the condition is applied, here <code>fluid</code> which corresponds to velocity and pressure \((\mathbf{u},p)\)</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>the type of boundary condition applied, here outlet or outflow boundary condition</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>the hysical entity to which outflow condition is applied</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>the expression associated to the outflow condition, note that it is scalar and corresponds in this case to the condition \(\sigma(\mathbf{u},p).n=0\)</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>"PostProcess": <i class="conum" data-value="1"></i><b>(1)</b>
    {
        "Exports": <i class="conum" data-value="2"></i><b>(2)</b>
        {
            "fields":["velocity","pressure","pid"] <i class="conum" data-value="3"></i><b>(3)</b>
        },

    }</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the name of the section</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>Exports</code> identifies the toolbox fields that have to be exported for visualisation</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the list of fields to be exported</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cfg_file"><a class="anchor" href="#_cfg_file"></a>2.2. CFG file</h3>
<div class="paragraph">
<p>The Model CFG (<code>.cfg</code>) files allow to pass command line options to Feel++ applications. In particular, it allows to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>setup the mesh</p>
</li>
<li>
<p>define the solution strategy and configure the linear/non-linear algebraic solvers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Cfg file used in this benchmark</p>
</div>
<div class="listingblock">
<div class="content">
<pre>directory=pipestokes  <i class="conum" data-value="1"></i><b>(1)</b>
case.dimension=2 <i class="conum" data-value="2"></i><b>(2)</b>
[fluid] <i class="conum" data-value="3"></i><b>(3)</b>
filename=$cfgdir/pipestokes.json <i class="conum" data-value="4"></i><b>(4)</b>
mesh.filename=$cfgdir/pipestokes.geo <i class="conum" data-value="5"></i><b>(5)</b>
gmsh.hsize=0.1 <i class="conum" data-value="6"></i><b>(6)</b>
pc-type=lu #gasm,lu <i class="conum" data-value="7"></i><b>(7)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the directory where the results are exported</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the dimension of the application, by default 3D</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>toolboxe prefix</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the associated Json file</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the geometric file</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>the mesh step</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>the chosen method for decomposition</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We didn&#8217;t configure the solver, cause in this case, the systeme is linear, and by default the solver chosen is the linear one.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_geometry_input_parameters"><a class="anchor" href="#_geometry_input_parameters"></a>3. Geometry &amp; Input parameters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_model_toolbox"><a class="anchor" href="#_model_toolbox"></a>3.1. Model &amp; Toolbox</h3>
<div class="paragraph">
<p>We consider a 2D model representative of a pipe, the flow domain is the rectangle \( \lbrack 0,length \rbrack \times \lbrack 0,height \rbrack \) and is characterized by its dynamic viscosity \(\mu\).
we chose for this case the Stokes model.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/newfigure.png" alt="Figure">
</div>
</div>
<div class="paragraph">
<p>We remind the Stokes model:</p>
</div>
<div class="stemblock">
<div class="content">
\[  \left\{
  \begin{aligned}
   \mu\Delta\boldsymbol{u}+\nabla p=\boldsymbol{f}\\
   \nabla\cdot\boldsymbol{u}=0
  \end{aligned}
  \right.\]
</div>
</div>
<div class="paragraph">
<p>with \(\boldsymbol{\mu}\) is the dynamic viscosity, \(p\) is the pressure, \(\boldsymbol{f}\) the source term and \(\boldsymbol{u}\) the velocity field.</p>
</div>
</div>
<div class="sect2">
<h3 id="_initial_conditions"><a class="anchor" href="#_initial_conditions"></a>3.2. Initial conditions</h3>
<div class="ulist">
<ul>
<li>
<p>Since we are not considering the time evolution in this case,
we have \(v_{inlet}\) = \(D\) \(y(height-y)\). To determine \(D\), we use the fact that for \(y=\frac{height}{2}\) we have the maximal velocity, so</p>
</li>
</ul>
</div>
<div class="stemblock">
<div class="content">
\[D=\frac{v_{max}}{\frac{height}{2}\left(height-\frac{height}{2}\right)}\]
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In this case, there is no source term so, \(\boldsymbol{f}=\boldsymbol{0}\).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_boundary_conditions_2"><a class="anchor" href="#_boundary_conditions_2"></a>3.3. Boundary conditions</h3>
<div class="ulist">
<ul>
<li>
<p>On <strong>wall</strong>, a homogenous Dirichlet condition \(\boldsymbol{u}=\boldsymbol{0}\)</p>
</li>
<li>
<p>On <strong>outlet</strong>, a Neumann condition \(\boldsymbol{\sigma} . \boldsymbol{n}=0\), where \(\boldsymbol{\sigma}=-p\boldsymbol{I}_d+2\mu\boldsymbol{D}(\boldsymbol{u})\) and \(\boldsymbol{D}(\boldsymbol{u})=\frac{1}{2}(\nabla \boldsymbol{u}+\nabla \boldsymbol{u}^{T})\),  \(\boldsymbol{\sigma} \)  is the contraint tensor and \(\boldsymbol{D}\) is the deformation tensor.</p>
</li>
<li>
<p>On <strong>inlet</strong>, an inflow Dirichlet condition :
\( \boldsymbol{u}=(v_{inlet},0) \)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_benchmark"><a class="anchor" href="#_benchmark"></a>4. Benchmark</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_results"><a class="anchor" href="#_results"></a>4.1. Results</h3>
<div class="paragraph">
<p>We find the Results in "/feel/pipestokes/np_1/fluid.exports", if we want to show the figure using Paraview we have to use the file Export.case
Using height=1, lenght=5 and vmax=1 we found thoses figures</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For the pressure</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/pression.png" alt="Pressure">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the velocity</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/vitesse.png" alt="Velocity">
</div>
</div>
<div class="paragraph">
<p>we can also show the arrows to see the direction of the flow, the figure below that the directions is from the left to the right, which means that the theory expectation
are verified, I mean by the theory expectation  that the flow of blood must go from the highest pression to the lowest.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/arrow.png" alt="Direction of the flow">
</div>
</div>
<div class="paragraph">
<p>Using height=3, lenght=5 and vmax=1, to change it we can use</p>
</div>
<div class="listingblock">
<div class="content">
<pre>feelpp_toolbox_fluid --case "github:{repo:toolbox,path:examples/modules/cfd/examples/pipestokes}"  --fluid.gmsh.geo-variables-list="height=3" --json-editions Parameters.height:3</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the pressure</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/pression2.png" alt="Pressure">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the velocity</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/vitesse2.png" alt="Velocity">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_issues"><a class="anchor" href="#_issues"></a>4.2. Issues</h3>
<div class="paragraph">
<p>We notice in the case above, the presence of two white points on the top of the outlet, we can also see the deflection of the arrows in the figure above. which is not normal, the probleme is in the bondary conditions, precisly the outlet one.
besides,we added the calculation of the error in the file json</p>
</div>
<div class="paragraph">
<p>Three solutions were suggested by PRUD&#8217;HOMME and CHABANNES</p>
</div>
<div class="sect3">
<h4 id="_first_case"><a class="anchor" href="#_first_case"></a>4.2.1. First case</h4>
<div class="paragraph">
<p>Instead of putting \(\sigma.n=0\), We calculate the expression of \(\sigma\) and put the exact expression.</p>
</div>
<div class="paragraph">
<p>The command line to run this case is</p>
</div>
<div id="command-line" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">mpirun -np 4 feelpp_toolbox_fluid --case "github:{repo:toolbox,path:examples/modules/cfd/examples/pipestokes/case_corrections/naumann}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>We already know the expression of \(u=Dy(1-y)\), and we know that the pression p is linear so \(p=ax+b\).<br>
The first equation of stokes give us that \(f=-\mu\Delta u+\nabla p\), we have \(\nabla p=(a,0)\) and \(\Delta u=(-2D,0)\).<br>
so \(f=(2\mu D+a,0)\), in our case we had no external force (\(f=0\)), to respect that, we have to choose a=-2\mu D.<br>
To detect the expression of b, we assumed that the pressure has a zero average, it means that
[stem]:</p>
</div>
 \begin{array}{rcr}
\frac{1}{\Omega}\int_{\Omega}p=0 & \Rightarrow \int_{0}^{height}\int_{0}^{lenght} -2\mu Dx+b \quad dx dy=0 \\
& \Rightarrow  height[-2\frac{1}{2}\mu Dx^{2}+bx]_{0}^{lenght}=0 \\
& \Rightarrow -height *\mu D *lenght^{2}+b*lenght=0
\end{array}
<div class="paragraph">
<p>So \(b*lenght=height* \mu D*lenght^{2}\), b=\(heigh \mu D*lenght\)<br>
The expression of p is p=-2 \(\mu Dx+height*\mu *D* lenght\).</p>
</div>
<div class="paragraph">
<p>We know that \(\sigma.n=-pI_{d}+2\mu D(u)\)
we calculate D(u)</p>
</div>
<div class="stemblock">
<div class="content">
\[D(u)=\frac{1}{2}
 \left(
  \begin{array}{ c c }
     0 &amp; D-2Dy  \\
     D-2Dy &amp; 0
  \end{array} \right)\]
</div>
</div>
<div class="paragraph">
<p>So</p>
</div>
<div class="stemblock">
<div class="content">
\[\sigma =
 \left(
  \begin{array}{ c c }
     -p &amp; \mu(D-2Dy)  \\
     \mu(D-2Dy)&amp; -p
  \end{array} \right)\]
</div>
</div>
<div class="paragraph">
<p>On as</p>
</div>
<div class="stemblock">
<div class="content">
\[n_{out}=\left(
  \begin{array}{ c c }
     1  \\
     0
  \end{array} \right)\]
</div>
</div>
<div class="paragraph">
<p>So</p>
</div>
<div class="stemblock">
<div class="content">
\[\sigma.n_{out}=\left(
  \begin{array}{ c c }
     -p  \\
     \mu(D-2Dy)
  \end{array} \right)\]
</div>
</div>
<div class="paragraph">
<p>That&#8217;s means that</p>
</div>
<div class="stemblock">
<div class="content">
\[\sigma.n_{out}=\left(
  \begin{array}{ c c }
     2\mu Dx-height*\mu D *lenght \\
     \mu (D-2Dy)
  \end{array} \right)\]
</div>
</div>
<div class="paragraph">
<p>For the data files the cfg didn&#8217;t change, we changed just the boundary conditions in the json, precisely the outlet condition.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/raouajaraib/toolbox/blob/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_neumann.cfg">CFG file</a> - [<a href="https://github.com/raouajaraib/toolbox/edit/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_neumann.cfg">Edit the file</a>]</p>
</li>
<li>
<p><a href="https://github.com/raouajaraib/toolbox/blob/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_neumann.json">JSON file</a> - [<a href="https://github.com/raouajaraib/toolbox/edit/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_neumann.json">Edit the file</a>]</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/arrow_neumann.png" alt="Direction of the flow">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_second_case"><a class="anchor" href="#_second_case"></a>4.2.2. Second case</h4>
<div class="paragraph">
<p>We put Dirichlet conditions everywhere, we know that the velocity is quadratic, so the velocity in outlet is the same that the one in inlet.</p>
</div>
<div class="paragraph">
<p>The command line to run this case is</p>
</div>
<div id="command-line-second" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">mpirun -np 4 feelpp_toolbox_fluid --case "github:{repo:toolbox,path:examples/modules/cfd/examples/pipestokes/case_corrections/dirichlet}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The data files for this case</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/raouajaraib/toolbox/blob/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_dirichlet.cfg">CFG file</a> - [<a href="https://github.com/raouajaraib/toolbox/edit/master/examples/modules/cfd/examplespipestokes/case_corrections/dirichlet/pipestokes_dirichlet.cfg">Edit the file</a>]</p>
</li>
<li>
<p><a href="https://github.com/raouajaraib/toolbox/blob/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_dirichlet.json">JSON file</a> - [<a href="https://github.com/raouajaraib/toolbox/edit/master/examples/modules/cfd/examplespipestokes/case_corrections/dirichlet/pipestokes_dirichlet.json">Edit the file</a>]</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/arrow_dirichlet.png" alt="Direction of the flow">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_third_case"><a class="anchor" href="#_third_case"></a>4.2.3. Third case</h4>
<div class="paragraph">
<p>We fixe that the tengential velocity is null and we fixe a value for p.</p>
</div>
<div class="paragraph">
<p>The command line to run this case is</p>
</div>
<div id="command-line-third" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">mpirun -np 4 feelpp_toolbox_fluid --case "github:{repo:toolbox,path:examples/modules/cfd/examples/pipestokes/case_corrections/pression}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The data files for this case</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/raouajaraib/toolbox/blob/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_pression.cfg">CFG file</a> - [<a href="https://github.com/raouajaraib/toolbox/edit/master/examples/modules/cfd/examples/pipestokes/case_corrections/pression/pipestokes_pression.cfg">Edit the file</a>]</p>
</li>
<li>
<p><a href="https://github.com/raouajaraib/toolbox/blob/master/examples/modules/cfd/examples/pipestokes/case_corrections/neumann/pipestokes_pression.cfg">JSON file</a> - [<a href="https://github.com/raouajaraib/toolbox/edit/master/examples/modules/cfd/examples/pipestokes/case_corrections/pression/pipestokes_pression.json">Edit the file</a>]</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/arrow_pression.png" alt="Direction of the flow">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_error"><a class="anchor" href="#_error"></a>4.2.4. Error</h4>
<div class="paragraph">
<p>To calculate the error, I add this part in the json file (based on the documentation of CHABANNES).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    "PostProcess":
    {
          "Measures":
        {

             "Norm":
             {
               "mynorm": <i class="conum" data-value="1"></i><b>(1)</b>
               {
                 "type":"L2", <i class="conum" data-value="2"></i><b>(2)</b>
                 "field":"velocity" <i class="conum" data-value="3"></i><b>(3)</b>
               },
              "myerror": <i class="conum" data-value="4"></i><b>(4)</b>
              {
                "type":"L2-error", <i class="conum" data-value="5"></i><b>(5)</b>
                "field":"velocity", <i class="conum" data-value="6"></i><b>(6)</b>
                "solution":"{(vmax/((height-(height/2.))*(height/2.)))*y*(height-y),0}:y:height:vmax" <i class="conum" data-value="7"></i><b>(7)</b>
              }
            }
        }
    }</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the name associated with the first norm computation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the norm type</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the field <code>u</code> evaluated in the norm (here the velocity field in the fluid toolbox)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the name associated with the second norm computation</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>the norm type</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>the field <code>u</code> evaluated in the norm</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>the expression <code>v</code> with the error norm type</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The results are stored in a CSV file at columns named <code>Norm_mynorm_L2</code> and <code>Norm_myerror_L2-error</code>.
Results:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">cases</th>
<th class="tableblock halign-left valign-top">Norm_mynorm_L2</th>
<th class="tableblock halign-left valign-top">Norm_myerror_L2-error</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Neumann</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6329931618554512e+00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.3760622864791791e-15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dirichlet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6329931618555187e+00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0511969262388929e-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Pression</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6329931618554521e+00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.7887047021696832e-15</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_comparison"><a class="anchor" href="#_comparison"></a>4.3. Comparison</h3>
<div class="paragraph">
<p>We saw that in CFG file, we can choose between two decomposition LU and Gasm, in the theory, the option Gasm is faster than LU, in fact Gasm decompose the domaine and it use LU in every part in parallel.</p>
</div>
<div class="paragraph">
<p>We decide to refine the mesh and compare the run time for both options.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/Figure_1.png" alt="Curve">
</div>
</div>
<div class="paragraph">
<p>we notice that the execution time decreases for both options, when the mesh step becomes coarse, which coincides with the theoretical results. And we can see also that the curve corresponds to the Gasm method is faster.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../_images/pipestokes/Figure_2.png" alt="Curve">
</div>
</div>
<div class="paragraph">
<p>The curve above corresponds to the time difference between the two methods, we can see that when the mesh step is large, the time differance is really small, on the other hand the time differance is big when the step mesh is small.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../TurekHron/README.html">Turek-Hron</a></span>
  <span class="next"><a href="../oscillating_cylinder/README.html">Oscillating Cylinder</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="sharethis-inline-share-buttons"></div>
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.cemosis.fr" class="icon">
            <img src="../../../../_/img/logoCemosisTransparent.png" alt="Cemosis">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.cemosis.fr" target="_blank" rel="noopener">Projects Documentation</a></li>
          <li><a href="https://join.slack.com/t/feelpp/shared_invite/zt-2qe0q9hw-4pVbhohCXUE6Po9Ma8dbiQ" target="_blank" rel="noopener">Forums(Slack)</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.cemosis.fr" target="_blank" rel="noopener">Cemosis</a></li>
          <li><a href="https://www.cemosis.fr/news" target="_blank" rel="noopener">News</a></li>
          <li><a href="https://www.cemosis.fr/projects" target="_blank" rel="noopener">Projects</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.feelpp.org" target="_blank" rel="noopener">Feel++ Documentation</a></li>
          <li><a href="http://docs.feelpp.org/user/">Get Started</a></li>
          <li><a href="http://docs.feelpp.org/user//install/distributions/">Downloads</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/cemosis.fr" class="icon">
            Facebook
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/cemosis" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/cemosis" class="icon">
             Linkedin
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Cemosis, Université de Strasbourg</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.cemosis.fr/terms-of-use">Terms of Use</a>
        <a href="https://www.cemosis.fr/privacy-policy">Privacy Policy</a>
        <a href="https://www.cemosis.fr/cookie-policy">Cookie Policy</a>
        <a href="https://www.cemosis.fr/support-policy">Support Policy</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>

<script async id="search-script" src="../../../../_/js/vendor/docsearch.js" data-app-id="03CF2L5SFL" data-api-key="53f606259c1ee7b82a42956e0c776c3d" data-index-name="feelpp" data-stylesheet="../../../../_/css/vendor/docsearch.css">
</script>

  </body>
</html>
